<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="generator" content="nanoc 3.8.0">
    <link rel="icon" type="image/png" href="/favicon.png">

    <title>Inferical Writings - objc</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/clean-blog.css" rel="stylesheet">
    <link href="/css/inferis.css" rel="stylesheet">
    <link href="/css/solarized-light.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- jQuery -->
    <script src="/js/jquery.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Inferical Writings</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
              <li>
                  <a href="http://inferis.org">About</a>
              </li>
              <li>
                  <a href="/blog/archives/">Archives</a>
              </li>
              <li>
                  <a href="/blog/categories/">Categories</a>
              </li>
              <li>
                  <a href="/feed.atom"><i class="fa fa-rss-square" style="font-size: 200%; position: relative; top: -2px;"></i></a>
              </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="intro-header" style="background-color: #eee;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>
                      
                        objc
                      
                    </h1>
                    <h2 class="subheading">All posts related to objc</h2>

                    
                </div>
            </div>
        </div>
    </div>
</header>
<script type="text/javascript">

(function() {
    var d = new Date();
    var s = d.getSeconds() + "";
    var m = d.getMinutes() + "";
    var h = d.getHours() + "";

    if (s.length < 2) s = "0" + s;
    if (m.length < 2) m = "0" + m;
    if (h.length < 2) h = "0" + h;

    $(".intro-header").css("background-color", '#' + h + m + s);
})();

</script>


    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2015/04/27/ios8-and-interfaceorientation/">Using interfaceOrientation with iOS8 transitions</a>
      
    </h2>
    <p class="post-meta">
      April 27th, 2015 ·
      <a href="/blog/2015/04/27/ios8-and-interfaceorientation/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/uikit/">uikit</a>
      
    </p>

    

<p>Working on an app last week, I needed a way to respond to rotation events in a view controller. Since iOS8, the rotation APIs in <code>UIViewController</code> are deprecated:</p>

<pre><code class="language-objc highlight highlight"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">willRotateToInterfaceOrientation</span><span class="p">:(</span><span class="n">UIInterfaceOrientation</span><span class="p">)</span><span class="nv">toInterfaceOrientation</span> <span class="nf">duration</span><span class="p">:(</span><span class="n">NSTimeInterval</span><span class="p">)</span><span class="nv">duration</span> <span class="n">NS_DEPRECATED_IOS</span><span class="p">(</span><span class="mi">2</span><span class="n">_0</span><span class="p">,</span><span class="mi">8</span><span class="n">_0</span><span class="p">,</span> <span class="s">"Implement viewWillTransitionToSize:withTransitionCoordinator: instead"</span><span class="p">);</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">didRotateFromInterfaceOrientation</span><span class="p">:(</span><span class="n">UIInterfaceOrientation</span><span class="p">)</span><span class="nv">fromInterfaceOrientation</span> <span class="n">NS_DEPRECATED_IOS</span><span class="p">(</span><span class="mi">2</span><span class="n">_0</span><span class="p">,</span><span class="mi">8</span><span class="n">_0</span><span class="p">);</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">willAnimateRotationToInterfaceOrientation</span><span class="p">:(</span><span class="n">UIInterfaceOrientation</span><span class="p">)</span><span class="nv">toInterfaceOrientation</span> <span class="nf">duration</span><span class="p">:(</span><span class="n">NSTimeInterval</span><span class="p">)</span><span class="nv">duration</span> <span class="n">NS_DEPRECATED_IOS</span><span class="p">(</span><span class="mi">3</span><span class="n">_0</span><span class="p">,</span><span class="mi">8</span><span class="n">_0</span><span class="p">,</span> <span class="s">"Implement viewWillTransitionToSize:withTransitionCoordinator: instead"</span><span class="p">);</span></code></pre>

<p>As you can see, they want you to use <code>viewWillTransitionToSize:withTransitionCoordinator:</code> instead.
So, no problem, we'll just implement that method.</p>

<p><strong>Update:</strong> <em>I'd like to stress this a little more: the reason they've changed these behaviors is for a reason. Your app mostly likely is way better off using adaptive layout using size classes, Auto Layout and manual corrections using the new transition callbacks.</em></p>

<p>Now, the only thing is: what if you need to know those "toInterfaceOrientation" or "fromInterfaceOrientation" value from the old APIs?</p>

<div class="read-more"><a href="/blog/2015/04/27/ios8-and-interfaceorientation/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2015/03/25/swiftyas/">SwiftyAs</a>
      
    </h2>
    <p class="post-meta">
      March 25th, 2015 ·
      <a href="/blog/2015/03/25/swiftyas/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/swift/">swift</a>, <a href="/blog/category/open%20source/">open source</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>Let me introduce: <a href="https://github.com/inferis/SwiftyAs">SwiftyAs</a>. It's a tiny little library to provide sort of the same functionality as <code>as?</code> from Swift in Objective-C. Let me explain...</p>

<div class="read-more"><a href="/blog/2015/03/25/swiftyas/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/05/03/show-me-some-id/">Show me some id</a>
      
    </h2>
    <p class="post-meta">
      May 03rd, 2014 ·
      <a href="/blog/2014/05/03/show-me-some-id/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>Brent Simmons touches on the use of <a href="http://inessential.com/2014/05/03/abbreviations">abbreviations</a> in Cocoa. I've noticed this behaviour too, and other uncocoalike things too. This is especially apparant in code of devs coming from other programming language/platforms.</p>

<div class="read-more"><a href="/blog/2014/05/03/show-me-some-id/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/05/02/the-setneedslayout-pattern/">The setNeedsLayout pattern</a>
      
    </h2>
    <p class="post-meta">
      May 02nd, 2014 ·
      <a href="/blog/2014/05/02/the-setneedslayout-pattern/">∞</a>
      
      · <a href="/blog/category/ios/">ios</a>, <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>For the project I'm working on we ran into a performance issue on iPhone4 where an interaction would lock up the phone for a few seconds. It ran fine on iPhone5 and in the Simulator, but there was a severe hangup in on the older device. Investigation in Instruments revealed to problem to be autolayout. A lot of time (&gt;3 seconds) was spent recalculating layout.</p>

<p>So I first hunted for <code>[view layoutIfNeeded]</code> calls, replacing them by <code>[view setNeedsLayout]</code> where applicable (sometimes you actually want to layout immediately if you need to do more stuff based on the layout results, but this is rarely the case). To no real avail, the issue remained extremely slow.</p>

<p>Digging in further, I found that two different call trees were doing autolayout of a certain part of the screen at the same time. This was all happening on the main thread which explained the lockup (no surprises there though). But in the timespan of the 2 seconds Instruments reported where (the major part of the) lockup was, there were two blocks where setting a label caused at least 800ms of autolayout calculations. So that's 1.6s accounted for. Which seemed like a good starting point to optimize.</p>

<p>The code was just setting properties (in this case: a title label and a response handler block), but they both touched the same label twice. I pondered on coalescing the two properties in one method but it seemed like an unsatisfying solution. And so I decided to copy a pattern Apple uses too regarding UI: the 'setNeedsLayout' pattern.</p>

<div class="read-more"><a href="/blog/2014/05/02/the-setneedslayout-pattern/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/04/12/the-builder-pattern-in-objective-c/">The Builder Pattern in Objective-C</a>
      
    </h2>
    <p class="post-meta">
      April 12th, 2014 ·
      <a href="/blog/2014/04/12/the-builder-pattern-in-objective-c/">∞</a>
      
      · <a href="/blog/category/ios/">ios</a>, <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>A <a href="http://www.annema.me/blog/post/2014/4/4/the-builder-pattern-in-objective-c">blogpost</a> by <a href="http://twitter.com/klaaspieter">Klaas Pieter Annema</a> is doing the rounds on twitter lately. It appears the builder pattern is quite new to iOS devs since everybody is raving about it. In my own humble opinion I do think it is a bit convoluted for what it's worth.</p>

<p>The <a href="http://joris.kluivers.nl/blog/2014/04/08/the-builder-pattern-in-objective-c-foundation/">followup post</a> by <a href="http://twitter.com/kluivers">Joris Kluivers</a> makes better use of existing classes: <code>NSURLComponents</code> becomes the builder for an <code>NSURL</code>, and given that these classes are already present and used in other use-cases, the builder pattern makes a lot of sense this way.</p>

<p>But I still feel that rolling just a builder class to construct an object is a bit overkill. But it turns out you don't need two classes: you just need to leverage another feature of Objective-C: protocols.</p>

<div class="read-more"><a href="/blog/2014/04/12/the-builder-pattern-in-objective-c/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/03/14/quick-look-for-uiview/">Quick Look for UIView</a>
      
    </h2>
    <p class="post-meta">
      March 14th, 2014 ·
      <a href="/blog/2014/03/14/quick-look-for-uiview/">∞</a>
      
      · <a href="/blog/category/ios/">ios</a>, <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>Xcode 5.0 introduced an interesting new feature: <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/CustomClassDisplay_in_QuickLook/Introduction/Introduction.html">Quick Look for variables</a>. Basically, it lets you inspect variables and their contents in a graphical way. This allows for interesting ways of viewing the state of your app.</p>

<p>I've been using the feature quite a bit: it's a great way to inspect images or colors you're using in your app, for example. Works great on attributed strings, too.</p>

<p><img class="center" src="http://cl.ly/image/0f473u3W2f0L/Image%202014-03-14%20at%2010.00.01%20pm.png" width="500"></p>

<p>Xcode 5.1 improves the feature even further with the addition of <code>debugQuickLookObject</code>. This method allows you to provide quick look content for any of your own classes. A bit like <code>debugDescription</code> but more advanced. I haven't had the time to look further into it.</p>

<div class="read-more"><a href="/blog/2014/03/14/quick-look-for-uiview/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/03/08/followup/">Followup</a>
      
    </h2>
    <p class="post-meta">
      March 08th, 2014 ·
      <a href="/blog/2014/03/08/followup/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>, <a href="/blog/category/csharp/">csharp</a>
      
    </p>

    

<p>I was listening to the <a href="http://www.imore.com/debug-30-casey-liss-c-and-net">most recent</a> <a href="http://www.imore.com/debug">Debug</a> episode, the one featuring the ever apologetic <a href="http://twitter.com/caseyliss">@caseyliss</a> talking about C#. It's another great episode (but most of the Debug episodes are great - I love the interaction of <a href="http://twitter.com/gte">@gte</a> with his guests). I was particularly interested in this one since I have a similar background: I spent most of my working days on a Microsoft platform and produced a bucketload of C# code (ever since it came out early 2000). Since late 2010 I've been mostly dabbling in Objective-C on the iOS platform. So I was quite curious on what Casey had to say.</p>

<p>While I'm not going to rehash everything here (go listen to the podcast), I agreed with most of it. I do think he forgot an important feature of generics and c# in general: "compile time breakage".</p>

<div class="read-more"><a href="/blog/2014/03/08/followup/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/03/07/categories-for-at-protocols-2/">categories-for-@protocols (2)</a>
      
    </h2>
    <p class="post-meta">
      March 07th, 2014 ·
      <a href="/blog/2014/03/07/categories-for-at-protocols-2/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>And a follow-up post for <a href="../../06/categories-for-at-protocols">this one</a>. Already!</p>

<p>I forgot about it, but <a href="http://twitter.com/pjaspers">@pjaspers</a> reminded me that
we actually did something similar to this using "regular" language constructs.</p>

<p>What you could do:</p>

<ol>
<li>extend the protocol with the method you need (as has been suggested before)</li>
<li>implement the protocol extension method a seperate .m file (similarly named to
the .h file the protocol is defined in, I guess). Forgo the @implementation/@end
dance, just put the method code "naked" into the file.</li>
<li>for each class conforming to the protocol do a <code>#include "Protocol+Implementation.m"</code> in
the class' implementation file. You read that right: thats an <strong>include</strong> and not an <strong>import</strong>.</li>
</ol>

<div class="read-more"><a href="/blog/2014/03/07/categories-for-at-protocols-2/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2014/03/06/categories-for-at-protocols/">Categories for @protocols</a>
      
    </h2>
    <p class="post-meta">
      March 06th, 2014 ·
      <a href="/blog/2014/03/06/categories-for-at-protocols/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/development/">development</a>
      
    </p>

    

<p>Yup. Categories for protocols. You heard that right.
It started with me asking about it on twitter:</p>

<div class="embed tweet">
<blockquote class="twitter-tweet" align="center" width="350">
<p>Defining a category on a protocol. Is that even possible? <a href="https://twitter.com/hashtag/objc?src=hash">#objc</a></p>— Tom Adriaenssen (@Inferis) <a href="https://twitter.com/Inferis/status/441603940250288128">March 6, 2014</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>

<p>This question caused much confusion. "How is that even possible?" "Categories are used to
extend existing classes, surely how can you extend a protocol?"</p>

<div class="read-more"><a href="/blog/2014/03/06/categories-for-at-protocols/">Continue reading ›</a></div>
</div>

  <hr>

  <div class="post-preview">
    <h2 class="post-title">
      
        <a href="/blog/2013/10/12/lazy-casting/">Lazy casting</a>
      
    </h2>
    <p class="post-meta">
      October 12th, 2013 ·
      <a href="/blog/2013/10/12/lazy-casting/">∞</a>
      
      · <a href="/blog/category/objc/">objc</a>, <a href="/blog/category/dev/">dev</a>
      
    </p>

    

<p>Just a quick tip, this one.</p>

<p>In Objective-C, like in every strongly typed language, sometimes you need to cast something to another type:</p>

<pre><code class="language-objc highlight highlight">    <span class="n">ModalViewController</span><span class="o">*</span> <span class="n">modalController</span> <span class="o">=</span> <span class="p">(</span><span class="n">ModalViewController</span><span class="o">*</span><span class="p">)</span><span class="n">self</span><span class="p">.</span><span class="n">parentViewController</span><span class="p">;</span></code></pre>

<p>Well, you don't have to, but you get a pesky warning if you don't. The code will work fine, but warnings are ugly:</p>

<div class="read-more"><a href="/blog/2013/10/12/lazy-casting/">Continue reading ›</a></div>
</div>

  <hr>


            </div>
        </div>
    </div>

    <hr>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="https://twitter.com/inferis">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://instagram.com/inferis">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/inferis">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://facebook.com/inferis">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://www.linkedin.com/in/tomadriaenssen">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://app.net/inferis">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-adn fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://pinboard.in/u:inferis">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-thumb-tack fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">This blog is <a href="https://github.com/Inferis/inferis.github.io">open source</a>.</p>
            </div>
        </div>
    </div>
</footer>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  if (window.location.hostname != "localhost") {
    ga('create', 'UA-155493-9', 'auto');
    ga('send', 'pageview');
  }

</script>


</body>

</html>
